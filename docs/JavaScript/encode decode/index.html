<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<link rel="alternate" type="application/rss+xml" href="/tech-note/blog/rss.xml" title="Thomas Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/tech-note/blog/atom.xml" title="Thomas Site Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Thomas Site" href="/tech-note/opensearch.xml"><title data-react-helmet="true">encode decode | Thomas Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://thomas-chu-30.github.io/tech-note/docs/JavaScript/encode decode"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="encode decode | Thomas Site"><meta data-react-helmet="true" name="description" content="通常如果一樣東西需要編碼，說明這樣東西並不適合傳輸。原因多種多樣，如 Size 過大，包含隱私資料，對於 Url 來說，之所以要進行編碼，是因為 Url 中有些字元會引起歧義。"><meta data-react-helmet="true" property="og:description" content="通常如果一樣東西需要編碼，說明這樣東西並不適合傳輸。原因多種多樣，如 Size 過大，包含隱私資料，對於 Url 來說，之所以要進行編碼，是因為 Url 中有些字元會引起歧義。"><link data-react-helmet="true" rel="icon" href="/tech-note/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://thomas-chu-30.github.io/tech-note/docs/JavaScript/encode decode"><link data-react-helmet="true" rel="alternate" href="https://thomas-chu-30.github.io/tech-note/docs/JavaScript/encode decode" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://thomas-chu-30.github.io/tech-note/docs/JavaScript/encode decode" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://LGDGXICOJ6-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/tech-note/assets/css/styles.a389bff1.css">
<link rel="preload" href="/tech-note/assets/js/runtime~main.447e1385.js" as="script">
<link rel="preload" href="/tech-note/assets/js/main.2139daaf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/tech-note/"><div class="navbar__logo"><img src="/tech-note/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/tech-note/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Thomas Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/tech-note/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/tech-note/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_Pssr toggle_TdHA toggleDisabled_jDku"><div class="toggleTrack_SSoT" role="button" tabindex="-1"><div class="toggleTrackCheck_XobZ"><span class="toggleIcon_eZtF">🌜</span></div><div class="toggleTrackX_YkSC"><span class="toggleIcon_eZtF">🌞</span></div><div class="toggleTrackThumb_uRm4"></div></div><input type="checkbox" class="toggleScreenReader_JnkT" aria-label="Switch between dark and light mode"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/tech-note/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Angular-Framework/guides">Angular-Framework</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/tutorial-basics/create-a-page">Tutorial - Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/tutorial-extras/manage-docs-versions">Tutorial - Extras</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Https/RESTful API">Https</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Docker/command-line">Docker</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/tech-note/docs/JavaScript/Get DOM Element">JavaScript</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tech-note/docs/JavaScript/Get DOM Element">**Get DOM Element**</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tech-note/docs/JavaScript/IIFE">**IIFE**</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/tech-note/docs/JavaScript/encode decode">encode decode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tech-note/docs/JavaScript/regular_expressions">Regular 正規表達式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tech-note/docs/JavaScript/this">this</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tech-note/docs/JavaScript/upload preview image">Preview Image</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tech-note/docs/JavaScript/日光節約時間">日光節約時間</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tech-note/docs/JavaScript/浮點數運算">**浮點數的加減**</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Nginx/起手式">Nginx</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Node/express">Node</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Other/Http">Other</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Python/chapter-6">Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Rxjs/customized_pipe">Rxjs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/Tool/CSRF tool">Tool</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/tech-note/docs/unit test/guides">unit test</a></div></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>encode decode</h1><blockquote><p>通常如果一樣東西需要編碼，說明這樣東西並不適合傳輸。原因多種多樣，如 Size 過大，包含隱私資料，<strong>對於 Url 來說，之所以要進行編碼，是因為 Url 中有些字元會引起歧義。</strong></p><p>例如，url 引數字串中使用 key=value 鍵值對這樣的形式來傳參，鍵值對之間以&amp;符號分隔，如/s?q=abc&amp;ie=utf-8。如果你的 value 字串中包含了=或者&amp;，那麼勢必會造成接收 Url 的伺服器解析錯誤，因此必須將引起歧義的&amp;和=符號進行轉義，也就是對其進行編碼。</p></blockquote><p>又如，url 的編碼格式採用的是 ASCII 碼，而不是 Unicode，這也就是說你不能在 Url 中包含任何非 ASCII 字元，例如中文。否則如果客戶端瀏覽器和服務端瀏覽器支援的字符集不同的情況下，中文可能會造成問題。</p><p>url 編碼的原則：就是使用安全的字元（沒有特殊用途或者特殊意義的可列印字元）去表示那些不安全的字元。
預備知識：URI 是統一資源標識的意思，通常我們所說的 URL 只是 URI 的一種。
典型 URL 的格式如下所示。下面提到的 URL 編碼，實際上應該指的是 URI 編碼。</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">  foo://example.com:8042/over/there?name=ferret#nose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  \__/ \_______________/\_________/\__________/\__/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   |           |             |          |        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scheme     authority        path      query   fragment</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="哪些字元需要編碼">哪些字元需要編碼<a class="hash-link" href="#哪些字元需要編碼" title="Direct link to heading">​</a></h2><p>RFC3986 文件規定，<strong>*<!-- -->URL 中只允許包含英文字母（a-zA-Z）、數字（0-9）、-<!-- -->_<!-- -->.~ 4 個特殊字元以及所有保留字元<!-- -->*</strong>。RFC3986 文件對 Url 的編解碼問題做出了詳細的建議，指出了哪些字元需要被編碼才不會引起 Url 語義的轉變，以及對為什麼這些字元需要編碼做出了相應的解釋。</p><p>US-ASCII 字符集中沒有對應的可列印字元：Url 中只允許使用可列印字元。US-ASCII 碼中的 10-7F 位元組全都表示控制字元，這些字元都不能直接出現在 Url 中。同時，對於 80-FF 位元組（ISO-8859-1），由於已經超出了 US-ACII 定義的位元組範圍，因此也不可以放在 Url 中。</p><p>保留字元：URL 可以劃分成若干個元件，協議、主機、路徑等。有一些字元（:/?#[]@）是用作分隔不同元件的。</p><p>例如<code>：</code>冒號用於分隔協議和主機，<code>/</code>用於分隔主機和路徑，<code>?</code>用於分隔路徑和查詢引數，等等。還有一些字元（!$&amp;&#x27;()<!-- -->*<!-- -->+,;=）用於在每個元件中起到分隔作用的，如<code>=</code>用於表示查詢引數中的鍵值對，<code>&amp;</code>符號用於分隔查詢多個鍵值對。<strong>當元件中的普通資料包含這些特殊字元時，需要對其進行編碼。</strong></p><blockquote><p>RFC3986 中指定了以下字元為保留字元：<strong>! <!-- -->*<!-- --> &#x27; ( ) ; : @ &amp; = + $ , / ? # <!-- -->[ ]</strong></p></blockquote><p>不安全字元：還有一些字元，當他們直接放在 URL 中的時候，可能會引起解析程式的歧義。這些字元被視為不安全字元，原因有很多。</p><ul><li>空格：url 在傳輸的過程，或者使用者在排版的過程，或者文字處理程式在處理 url 的過程，都有可能引入無關緊要的空格，或者將那些有意義的空格給去掉。</li><li>引號以及<code>&lt;&gt;</code>：引號和尖括號通常用於在普通文字中起到分隔 url 的作用</li><li>#<!-- -->：通常用於表示書籤或者錨點</li><li>%：百分號本身用作對不安全字元進行編碼時使用的特殊字元，因此本身需要編碼</li><li>{}|\^[]`~：某一些閘道器或者傳輸代理會篡改這些字元</li></ul><p>需要注意的是，對於 Url 中的合法字元，編碼和不編碼是等價的，但是對於上面提到的這些字元，如果不經過編碼，那麼它們有可能會造成 Url 語義的不同。因此對於 url 而言，只有普通英文字元和數字，特殊字元$-<!-- -->_<!-- -->.+!<!-- -->*<!-- -->&#x27;()還有保留字元，才能出現在未經編碼的 url 之中。其他字元均需要經過編碼之後才能出現在 Url 中。</p><p>但是由於歷史原因，目前尚存在一些不標準的編碼實現。例如對於~符號，雖然 RFC3986 文件規定，對於波浪符號~，不需要進行 Url 編碼，但是還是有很多老的閘道器或者傳輸代理會進行編碼。</p><p><strong>URL 編碼遵循下列規則：</strong> 每對 name/value 由&amp;；符分開；每對來自表單的 name/value 由=符分開。如果使用者沒有輸入值給這個 name，那麼這個 name 還是出現，只是無值。任何特殊的字元（就是那些不是簡單的七位 ASCII，如漢字）將以百分符%用十六進位制編碼，當然也包括象 =,&amp;；，和 % 這些特殊的字元。其實 url 編碼就是一個字元 ascii 碼的十六進位制。不過稍微有些變動，需要在前面加上“%”。比如“\”，它的 ascii 碼是 92，92 的十六進位制是 5c，所以“\”的 url 編碼就是%5c。那麼漢字的 url 編碼呢？很簡單，看例子：“胡”的 ascii 碼是-17670，十六進位制是 BAFA，url 編碼是“%BA%FA”。</p><p>防止 sql 注入。URL 編碼平時是用不到的，因為 IE 會自動將輸入到位址列的非數字字母轉換為 url 編碼。曾有人提出資料庫名字裡帶上“#”以防止被下載，因為 IE 遇到#就會忽略後面的字母。破解方法很簡單——用 url 編碼%23 替換掉#。也可以使用 “雙 URL 編碼”</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="url-與-uri"><strong>URL 與 URI</strong><a class="hash-link" href="#url-與-uri" title="Direct link to heading">​</a></h2><p>很多人會混淆這兩個名詞。
URL：(Uniform/Universal Resource Locator 的縮寫，統一資源定位符)。
URI：(Uniform Resource Identifier 的縮寫，統一資源識別符號)。</p><p>關係：
URI 屬於 URL 更低層次的抽象，一種字串文字標準。
就是說，URI 屬於父類，而 URL 屬於 URI 的子類。URL 是 URI 的一個子集。</p><p>二者的區別：URI 表示請求伺服器的路徑，定義這麼一個資源。而 URL 同時說明要如何訪問這個資源（http://）。</p><p>埠 與 URL 標準格式
何為埠？埠(Port)，相當於一種資料的傳輸通道。用於接受某些資料，然後傳輸給相應的服務，而電腦將這些資料處理後，再將相應的回覆通過開啟的埠傳給對方。
埠的作用：因為 IP 地址與網路服務的關係是一對多的關係。所以實際上因特網上是通過 IP 地址加上埠號來區分不同的服務的。
埠是通過埠號來標記的，埠號只有整數，範圍是從 0 到 65535。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="url-編碼"><strong>URL 編碼</strong><a class="hash-link" href="#url-編碼" title="Direct link to heading">​</a></h2><p>為什麼要進行 URL 編碼？通常如果一樣東西需要編碼，說明這樣東西並不適合直接進行傳輸。</p><p>1、會引起歧義：例如 URL 引數字串中使用 key=value 這樣的鍵值對形式來傳參，鍵值對之間以 &amp; 符號分隔，如 <strong>?postid=5038412&amp;t=1450591802326</strong>，伺服器會根據引數串的 &amp; 和 = 對引數進行解析，如果 value 字串中包含了 = 或者 &amp; ，如寶潔公司的簡稱為 P&amp;G，假設需要當做引數去傳遞，那麼可能 URL 所帶引數可能會是這樣 <strong>?name=P&amp;G&amp;t=1450591802326</strong>，因為引數中多了一個&amp;勢必會造成接收 URL 的伺服器解析錯誤，因此必須將引起歧義的 &amp; 和 = 符號進行轉義， 也就是對其進行編碼。</p><p>2、非法字元：又如，URL 的編碼格式採用的是 ASCII 碼，而不是 Unicode，這也就是說你不能在 URL 中包含任何非 ASCII 字元，例如中文。否則如果客戶端瀏覽器和服務端瀏覽器支援的字符集不同的情況下，中文可能會造成問題。</p><p>那麼如何編碼？如下：</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="escape-已被廢除"><del>escape (已被廢除)</del><a class="hash-link" href="#escape-已被廢除" title="Direct link to heading">​</a></h3><p>首先想宣告的是，<strong>W3C 把這個函式廢棄了，身為一名前端如果還用這個函式是要打臉的。</strong></p><p>escape 只是對字串進行編碼（而其餘兩種是對 URL 進行編碼），與 URL 編碼無關。編碼之後的效果是以 %XX 或者 %uXXXX 這種形式呈現的。它不會對 <strong>ASCII 字元、數字 以及 @ <!-- -->*<!-- --> / +</strong> 進行編碼。</p><p>根據 MDN 的說明，escape 應當換用為 encodeURI 或 encodeURIComponent；unescape 應當換用為 decodeURI 或 decodeURIComponent。escape 應該避免使用。舉例如下：</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">encodeURI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://www.baidu.com/ a b c&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// &quot;https://www.baidu.com/%20a%20b%20c&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">encodeURIComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://www.baidu.com/ a b c&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// &quot;https%3A%2F%2Fwww.baidu.com%2F%20a%20b%20c&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//而 escape 會編碼成下面這樣，eocode 了冒號卻沒 encode 斜槓，十分怪異，故廢棄之</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">escape</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;https://www.baidu.com/ a b c&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// &quot;https%3A//www.baidu.com/%20a%20b%20c&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="encodeuri">encodeURI<a class="hash-link" href="#encodeuri" title="Direct link to heading">​</a></h3><p>encodeURI() 是 Javascript 中真正用來對 URL 編碼的函式。它著眼於對整個 URL 進行編碼。</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">encodeURI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://www.cnblogs.com/season-huang/some other thing&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//&quot;http://www.cnblogs.com/season-huang/some%20other%20thing&quot;;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>編碼後變為上述結果，可以看到空格被編碼成了%20，而<strong>斜槓 / ，冒號 :</strong> 並沒有被編碼。是的，它用於對整個 URL 直接編碼，不會對 <strong>ASCII 字母 、數字 、 ~ ! @ # $ &amp; <!-- -->*<!-- --> ( ) = : / , ; ? + &#x27; 進行編碼。</strong></p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">encodeURI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;~!@#$&amp;*()=:/,;?+&#x27;&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ~!@#$&amp;*()=:/,;?+&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="encodeuricomponent">encodeURIComponent<a class="hash-link" href="#encodeuricomponent" title="Direct link to heading">​</a></h3><p>嘿，有的時候，我們的 URL 長這樣子，請求引數中帶了另一個 URL ：</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://www.a.com?foo=http://www.b.com?t=123&amp;s=456&quot;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>直接進行 encodeURI 顯然是不行的。因為 encodeURI 不會對冒號 : 及斜槓 / 進行轉義，那麼就會出現上述所說的伺服器接受到之後解析會有歧義。</p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">encodeURI</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// &quot;http://www.a.com?foo=http://www.b.com?t=123&amp;b=456&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>這個時候，就該用到 encodeURIComponent() 。它的作用是對 URL 中的引數進行編碼，記住是對引數，而不是對整個 URL 進行編碼。</p><p>因為它僅僅不對 <strong>ASCII 字母、數字 ~ ! <!-- -->*<!-- --> ( ) &#x27; 進行編碼。</strong></p><p><strong>錯誤的用法：</strong></p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://www.a.com?foo=http://www.b.com?t=123&amp;s=456&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">encodeURIComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">URL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// &quot;http%3A%2F%2Fwww.a.com%3Ffoo%3Dhttp%3A%2F%2Fwww.b.com%3Ft%3D123%26s%3D456&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 錯誤的用法，看到第一個 http 的冒號及斜槓也被 encode 了</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>正確的用法：encodeURIComponent() 著眼於對單個的引數進行編碼：</strong></p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> param </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://www.b.com?t=123&amp;s=456&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 要被編碼的引數</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token constant" style="color:#36acaa">URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://www.a.com?foo=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">encodeURIComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">param</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//&quot;http://www.a.com?foo=http%3A%2F%2Fwww.b.com%3Ft%3D123%26s%3D456&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="參考資料">參考資料<a class="hash-link" href="#參考資料" title="Direct link to heading">​</a></h2><p><a href="https://stackoverflow.com/questions/5450190/how-to-encode-the-plus-symbol-in-a-url" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/5450190/how-to-encode-the-plus-symbol-in-a-url</a></p><p><a href="https://stackoverflow.com/questions/6855624/plus-sign-in-query-string" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/6855624/plus-sign-in-query-string</a></p><p><a href="https://www.itread01.com/content/1547754501.html" target="_blank" rel="noopener noreferrer">https://www.itread01.com/content/1547754501.html</a></p><p><a href="https://dotblogs.com.tw/apprenticeworkshop/2018/12/09/About-URL-Encoding" target="_blank" rel="noopener noreferrer">https://dotblogs.com.tw/apprenticeworkshop/2018/12/09/About-URL-Encoding</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/thomas-chu-30/tech-note/tree/master/docs/JavaScript/encode decode.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/tech-note/docs/JavaScript/IIFE"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">**IIFE**</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/tech-note/docs/JavaScript/regular_expressions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Regular 正規表達式</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#哪些字元需要編碼" class="table-of-contents__link toc-highlight">哪些字元需要編碼</a></li><li><a href="#url-與-uri" class="table-of-contents__link toc-highlight"><strong>URL 與 URI</strong></a></li><li><a href="#url-編碼" class="table-of-contents__link toc-highlight"><strong>URL 編碼</strong></a><ul><li><a href="#escape-已被廢除" class="table-of-contents__link toc-highlight"><del>escape (已被廢除)</del></a></li><li><a href="#encodeuri" class="table-of-contents__link toc-highlight">encodeURI</a></li><li><a href="#encodeuricomponent" class="table-of-contents__link toc-highlight">encodeURIComponent</a></li></ul></li><li><a href="#參考資料" class="table-of-contents__link toc-highlight">參考資料</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/tech-note/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/tech-note/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/thomas-chu-30" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/tech-note/assets/js/runtime~main.447e1385.js"></script>
<script src="/tech-note/assets/js/main.2139daaf.js"></script>
</body>
</html>